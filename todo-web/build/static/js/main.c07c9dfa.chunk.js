(this["webpackJsonptodo-demo-web"]=this["webpackJsonptodo-demo-web"]||[]).push([[0],{170:function(e,t,n){},172:function(e,t,n){},267:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(29),c=n.n(i),r=n(155),l=n(26),d=n(93),u=n(94),o=n(110),j=n(109),h=(n(170),n(15)),b=function(e){Object(o.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("h1",{children:"\u5bfc\u822a"}),Object(h.jsx)("a",{href:"#/list",children:"\u4efb\u52a1\u5217\u8868\u9875\u9762"})]})}}]),n}(s.a.Component),m=n(159),x=n(95),p=(n(172),n(47)),f=n.n(p),O=n(66),y=n.n(O),v=n(160),g=n(278),k=n(46),S=n(270),C=n(273),D=n(277),T=n(275),q=n(271),F=n(272),I=n(276),N=n(274),R=function(e){Object(o.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).formRef=s.a.createRef(),a.onClose=function(){a.setState({visible:!1})},a.addHandel=function(){a.setState({visible:!0,type:"add"},(function(){a.formRef.current.resetFields()}))},a.changeStatus=function(e){"2"===e.status?(e.status="1",y.a.post("http://127.0.0.1:3333/update_status",e).then((function(e){a.queryData(),v.b.success("\u72b6\u6001\u53d8\u66f4\u4ee3\u529e\u6210\u529f")}))):"1"===e.status&&(e.status="2",y.a.post("http://127.0.0.1:3333/update_status",e).then((function(e){a.queryData(),v.b.success("\u72b6\u6001\u53d8\u66f4\u5b8c\u6210")})))},a.delHandel=function(e){v.b.success("\u4efb\u52a1\u5220\u9664\u6210\u529f"),e.status="3",y.a.post("http://127.0.0.1:3333/update_status",e).then((function(e){a.queryData()}))},a.queryData=a.queryData.bind(Object(x.a)(a)),a.state={columns:[{title:"id",dataIndex:"id",key:"id"},{title:"\u6807\u9898",dataIndex:"name",key:"name"},{title:"\u5185\u5bb9",dataIndex:"content",key:"content"},{title:"\u622a\u6b62\u65e5\u671f",dataIndex:"endTime",key:"endTime"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return{1:"\u4ee3\u529e",2:"\u5df2\u5b8c\u6210",3:"\u5df2\u5220\u9664"}[e]}},{title:"Action",key:"action",render:function(e,t){return Object(h.jsxs)(g.b,{size:"middle",children:[Object(h.jsx)(k.a,{onClick:function(){return a.editHander(t)},children:"\u7f16\u8f91"}),"3"!==t.status?Object(h.jsxs)("div",{children:[Object(h.jsx)(k.a,{type:"primary",onClick:function(){return a.changeStatus(t)},children:"1"===t.status?"\u5b8c\u6210":"\u4ee3\u529e"}),Object(h.jsx)(k.a,{className:"delbox",type:"primary",danger:!0,onClick:function(){return a.delHandel(t)},children:"\u5220\u9664"})]}):null]})},filters:[{text:"\u4ee3\u529e",value:"1"},{text:"\u5b8c\u6210",value:"2"},{text:"\u5220\u9664",value:"3"}],filterMultiple:!1,onFilter:function(e,t){return t.status===e}}],visible:!1,data:[],pageSize:10,total:30,type:"add",items:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.queryData()}},{key:"onReset",value:function(){this.formRef.current.resetFields()}},{key:"editHander",value:function(e){var t=this;this.setState({visible:!0,type:"update",items:e}),setTimeout((function(){t.formRef.current.setFieldsValue({name:e.name,content:e.content,endTime:f()(e.endTime)})}))}},{key:"onFinish",value:function(e){var t=this;e.endTime=f()(e.endTime).format("YYYY-MM-DD"),"add"===this.state.type?(e.status="1",y.a.post("http://127.0.0.1:3333/create",e).then((function(e){v.b.success("\u4efb\u52a1\u65b0\u589e\u5b8c\u6210"),t.queryData(),t.setState({visible:!1})}))):(e.status=this.state.items.status,e.id=this.state.items.id,y.a.post("http://127.0.0.1:3333/update",e).then((function(e){v.b.success("\u4efb\u52a1\u4fee\u6539\u5b8c\u6210"),t.queryData(),t.setState({visible:!1})})))}},{key:"queryData",value:function(){var e=this;y.a.get("http://127.0.0.1:3333/list/").then((function(t){var n=t.data.list;e.setState({data:Object(m.a)(n),total:n.length})}))}},{key:"render",value:function(){var e=this,t=this.state.columns;return Object(h.jsxs)("div",{className:"listbox",children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("h1",{children:"\u5bfc\u822a"}),Object(h.jsx)("a",{href:"/home",children:"\u8fd4\u56de\u9996\u9875"})]}),Object(h.jsx)("div",{className:"divide",children:Object(h.jsx)(S.a,{children:"\u4efb\u52a1\u5217\u8868"})}),Object(h.jsxs)("div",{className:"box",children:[Object(h.jsx)(k.a,{type:"primary",onClick:this.addHandel,children:"\u65b0\u589e"}),Object(h.jsx)("div",{className:"table",children:Object(h.jsx)(C.a,{columns:t,rowKey:"id",dataSource:this.state.data,border:!0,total:this.state.total,pageSize:this.state.pageSize})})]}),Object(h.jsx)(D.a,{title:"\u65b0\u589e\u4efb\u52a1",width:500,placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingTop:80},children:Object(h.jsxs)(T.a,{layout:"vertical",ref:this.formRef,onFinish:function(t){return e.onFinish(t)},children:[Object(h.jsx)(q.a,{gutter:16,children:Object(h.jsx)(F.a,{span:24,children:Object(h.jsx)(T.a.Item,{name:"name",label:"\u4efb\u52a1\u540d\u79f0:",rules:[{required:!0,message:"\u8bf7\u5fc5\u987b\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}],children:Object(h.jsx)(I.a,{})})})}),Object(h.jsx)(q.a,{gutter:16,children:Object(h.jsx)(F.a,{span:24,children:Object(h.jsx)(T.a.Item,{name:"endTime",label:"\u4efb\u52a1\u622a\u6b62\u65e5\u671f:",rules:[{required:!0,message:"\u8bf7\u5fc5\u987b\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}],children:Object(h.jsx)(N.a,{className:"dateStyle"})})})}),Object(h.jsx)(q.a,{gutter:16,children:Object(h.jsx)(F.a,{span:24,children:Object(h.jsx)(T.a.Item,{name:"content",label:"\u4efb\u52a1\u5185\u5bb9:",rules:[{required:!1}],children:Object(h.jsx)(I.a.TextArea,{})})})}),Object(h.jsxs)(q.a,{gutter:16,children:[Object(h.jsxs)(F.a,{span:8,children:[" ",Object(h.jsx)(k.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})," "]}),Object(h.jsxs)(F.a,{span:8,children:[" ",Object(h.jsx)(k.a,{onClick:function(){return e.onReset()},children:"\u91cd\u7f6e"})," "]}),Object(h.jsxs)(F.a,{span:8,children:[" ",Object(h.jsx)(k.a,{type:"primary",danger:!0,onClick:this.onClose,children:"\u53d6\u6d88"})," "]})]})]})})]})}}]),n}(a.Component),w=function(){return Object(h.jsx)(r.a,{children:Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{exact:!0,path:"/",component:b}),Object(h.jsx)(l.a,{exact:!0,path:"/list",component:R})]})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,279)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};c.a.render(Object(h.jsxs)(s.a.StrictMode,{children:[Object(h.jsx)(w,{}),","]}),document.getElementById("root")),H()}},[[267,1,2]]]);
//# sourceMappingURL=main.c07c9dfa.chunk.js.map